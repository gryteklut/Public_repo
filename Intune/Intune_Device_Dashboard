{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 1,
      "content": {
        "json": "<img src=\"%YourURLHere%\" height=\"100\")>\r\n\r\n## Intune Device Dashboard"
      },
      "name": "Header Text"
    },
    {
      "type": 1,
      "content": {
        "json": "-----------"
      },
      "name": "Filter Rule Split"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "831f399a-8ae6-4adf-af9f-abeeffeccad3",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "label": "Time Range",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 5184000000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "3a598954-efb1-4a7e-9199-7349bc72140d",
            "version": "KqlParameterItem/1.0",
            "name": "deltatime",
            "label": "delta",
            "type": 1,
            "description": "What date to compare data",
            "value": "21"
          },
          {
            "id": "b3edf5a9-f518-4d3e-9b6c-d6efb24cd553",
            "version": "KqlParameterItem/1.0",
            "name": "_SnapshotTime",
            "label": "Time range",
            "type": 1,
            "query": "UCClient\r\n| where TimeGenerated >= ago(7d)\r\n| summarize max(TimeGenerated)",
            "isHiddenWhenLocked": true,
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "541dbc21-2bde-4ba4-9d56-b85e9d8e2583",
            "version": "KqlParameterItem/1.0",
            "name": "mappedWorkspace",
            "label": "workspace",
            "type": 5,
            "isRequired": true,
            "query": "resources\r\n| where type == \"microsoft.operationalinsights/workspaces\"\r\n| where tolower(\"{savedMappingWorkspaceName}\") == tolower(name)",
            "isHiddenWhenLocked": true,
            "typeSettings": {
              "additionalResourceOptions": []
            },
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          }
        ],
        "style": "pills",
        "queryType": 10
      },
      "customWidth": "50",
      "name": "Params"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "0c2b23a2-1fd6-4fd3-a8cb-656e244b0064",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Summary",
            "subTarget": "Summary",
            "style": "link"
          },
          {
            "id": "7c18a79f-2bbe-408b-8353-a4247f123881",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Compliance",
            "subTarget": "Compliance",
            "style": "link"
          },
          {
            "id": "4aed2022-8cd8-44c8-babb-0f5a5128b71a",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Enrollment",
            "subTarget": "Enrollment",
            "style": "link"
          },
          {
            "id": "58fc11f9-3899-4907-a569-a62f6f41a4a8",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Devices",
            "subTarget": "Devices",
            "style": "link"
          },
          {
            "id": "c0b64833-fa80-4ad8-a893-a610db6ff202",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Windows update",
            "subTarget": "Update",
            "style": "link"
          },
          {
            "id": "fdc4f110-5525-42f5-93b1-0f6cfd0eb8ac",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Tab y",
            "subTarget": "AuditLog",
            "style": "link"
          }
        ]
      },
      "name": "Tabs"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "\n\n## Device Manager Summary\n\nBelow are summaries of devices over the previous {TimeRange}.",
              "style": "success"
            },
            "name": "Trending Events",
            "styleSettings": {
              "padding": "20px"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n//| where TimeGenerated > ago(21d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"Windows\"\n| summarize count()\n| extend TimeRange = (\"Time Range {TimeRange}\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New Windows Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\n| where TimeGenerated > ago(120d) //120d is when inactive device gets deleted\n| summarize LastContact = max(TimeGenerated) by SerialNumber\n| where LastContact < ago({deltatime:value}d)\n| summarize count() by SerialNumber\n| summarize count()",
                    "size": 4,
                    "title": "Devices inactive for {deltatime:value} days",
                    "color": "Red",
                    "noDataMessageStyle": 4,
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "History",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 1,
                          "max": 30,
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    }
                  },
                  "name": "Inactive device"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "//IntuneDevices\n//| where OS == \"Windows\"\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceName\n//| summarize count() by DeviceName\n//|summarize count()\n\nIntuneDeviceComplianceOrg\n| where todatetime(LastContact) > ago({deltatime:value}d)\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| summarize count() by SerialNumber\n| summarize count()",
                    "size": 4,
                    "title": "Devices active last {deltatime:value} days",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 0,
                          "palette": "green"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "ManagedBy",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "count_DeviceName",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "count_DeviceName",
                      "sizeAggregation": "Sum",
                      "legendMetric": "count_DeviceName",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "count_DeviceName",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Devices Wiped"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| where TimeGenerated > ago(1d)\n| where OSDescription == \"Windows\"\n| summarize count() by OSDescription",
                    "size": 1,
                    "title": "Windows devices",
                    "color": "green",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "formatter": 6
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 0,
                          "palette": "green"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "ManagedBy",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "count_DeviceName",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "count_DeviceName",
                      "sizeAggregation": "Sum",
                      "legendMetric": "count_DeviceName",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "count_DeviceName",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "query - 4"
                }
              ]
            },
            "customWidth": "20",
            "name": "Summary Tiles",
            "styleSettings": {
              "margin": "10px",
              "padding": "10px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Lastweek=\nUCClient\n| where TimeGenerated > ago(7d)\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| summarize count() by OSVersion\n| sort by OSVersion desc\n| extend CustomName = OSVersion\n| extend Version_Lastweek = count_;\nlet Today=\nUCClient\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| summarize count() by OSVersion\n| sort by OSVersion desc\n| extend CustomName = OSVersion\n| extend Version_Today = count_;\nLastweek\n| join kind=inner Today on OSVersion\n| project CustomName, Version_Today, Version_Lastweek, Difference = Version_Today-Version_Lastweek\n| sort by CustomName desc\n",
                    "size": 4,
                    "title": "Windows OS versions",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "formatter": 5
                      },
                      "subtitleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 5
                      },
                      "leftContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": "Blank",
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Comparedate=\nIntuneDeviceComplianceOrg\n| where TimeGenerated < ago({deltatime}d)\n| summarize arg_max(TimeGenerated, *) by SerialNumber, ComplianceState\n| where todatetime(LastContact) > ago(30d)\n| where OS == \"Windows\"\n//| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend Comparedate_count = count_;\nlet Today=\nIntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| where todatetime(LastContact) > ago(30d)\n| where OS == \"Windows\"\n//| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend today_count = count_;\nComparedate\n| join kind=inner Today on ComplianceState\n| project CustomName, today_count, Comparedate_count, Difference = today_count-Comparedate_count\n| sort by CustomName desc",
                    "size": 4,
                    "title": "Compliance state on active devices (30d)",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "today_count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2,
                            "maximumSignificantDigits": 3
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": null,
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": null,
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\r\n| where TimeGenerated > ago({deltatime:value}d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\r\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\r\n| extend OS = tostring(todynamic(Properties).Os)\r\n| where Result == \"Success\"\r\n| where OperationName has \"Enrollment\"\r\n//| where OS == \"Windows\" // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\r\n| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\r\n| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS, UserName\r\n| summarize TimeGenerated = max(TimeGenerated) by DeviceName, UserName, OS\r\n| sort by TimeGenerated desc",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "New intune enrollment last {deltatime:value} days",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ]
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Application Events ",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\r\n| summarize arg_max(TimeGenerated, *) by DeviceName\r\n| where todatetime(LastContact) > ago(30d)\r\n| where ComplianceState == \"Not compliant\"\r\n| project ComplianceState, DeviceName, LastContact\r\n",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "Active and non-compliant devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "LastContact",
                          "formatter": 6
                        },
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "showBorder": false,
                      "titleContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Location",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Successful",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "AzureLoc",
                      "locInfoColumn": "Location",
                      "sizeSettings": "Successful",
                      "sizeAggregation": "Count",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "nodeColorField": "EnrollmentCount",
                        "colorAggregation": "Sum",
                        "type": "heatmap",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Users",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "customWidth": "80",
            "name": "Count Graphs",
            "styleSettings": {
              "margin": "20px",
              "padding": "20px"
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Summary"
      },
      "name": "SummaryTab",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "\n\n## Enrollment\n\nBelow are summaries of enrollments over the previous {TimeRange}.",
              "style": "success"
            },
            "name": "Trending Events",
            "styleSettings": {
              "padding": "20px"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n| where TimeGenerated > ago({deltatime}d)\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"Windows\"\n| summarize count()\n| extend TimeRange = (\"Time Range {deltatime} days\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New Windows Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n//| where TimeGenerated > ago(21d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\n| where TimeGenerated > ago({deltatime}d)\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"Android\"\n| summarize count()\n| extend TimeRange = (\"Time Range {deltatime} days\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New Android Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n//| where TimeGenerated > ago(21d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\n| where TimeGenerated > ago({deltatime}d)\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"iOS\"\n| summarize count()\n| extend TimeRange = (\"Time Range {deltatime} days\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New iOS Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n//| where TimeGenerated > ago(21d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\n| where TimeGenerated > ago({deltatime}d)\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"MacOS\"\n| summarize count()\n| extend TimeRange = (\"Time Range {deltatime} days\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New MacOS Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments - Copy - Copy - Copy"
                }
              ]
            },
            "customWidth": "20",
            "name": "Summary Tiles",
            "styleSettings": {
              "margin": "10px",
              "padding": "10px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\r\n| where TimeGenerated > ago({deltatime}d)\r\n| where  OperationName == \"Enrollment\"\r\n| summarize count() by Result\r\n",
                    "size": 3,
                    "title": "Enrollment Statistics last {deltatime} days",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "piechart"
                  },
                  "customWidth": "50",
                  "name": "query - 7"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n| where TimeGenerated > ago({deltatime}d) // look for devices that were active in the last 30 days\n| where OperationName == \"Enrollment\" // Filter for enrollments\n| extend Type = todynamic(Properties).EnrollmentType // Look into properties for the enrollment type\n| summarize count(OperationName) by tostring(Type)",
                    "size": 3,
                    "title": "Enrollment types last {deltatime} days",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "piechart",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": "Blank",
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n| where OperationName == \"Enrollment\" and Result == \"Fail\"\n| where TimeGenerated > ago({deltatime}d)\n| extend Reason = tostring(todynamic(Properties).FailureReason)\n| extend Enrollmenttype = tostring(todynamic(Properties).EnrollmentType)\n| extend FailureCategory = tostring(todynamic(Properties).FailureCategory)\n| project TimeGenerated, Enrollmenttype, Result, FailureCategory, Reason",
                    "size": 3,
                    "title": "Enrollment failures last {deltatime} days",
                    "noDataMessage": "No failed enrollments",
                    "noDataMessageStyle": 3,
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": "Blank",
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\r\n| where TimeGenerated > ago({deltatime:value}d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\r\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\r\n| extend OS = tostring(todynamic(Properties).Os)\r\n| where Result == \"Success\"\r\n| where OperationName has \"Enrollment\"\r\n//| where OS == \"Windows\" // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\r\n| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\r\n| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS, UserName\r\n| summarize TimeGenerated = max(TimeGenerated) by DeviceName, UserName, OperationName, OS\r\n| sort by TimeGenerated desc",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "New intune enrollment last {deltatime:value} days",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ],
                      "sortBy": [
                        {
                          "itemKey": "TimeGenerated",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "TimeGenerated",
                        "sortOrder": 2
                      }
                    ]
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Application Events ",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "customWidth": "80",
            "name": "Count Graphs",
            "styleSettings": {
              "margin": "20px",
              "padding": "20px"
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Enrollment"
      },
      "name": "Enrollment",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "\n\n## Device\nDevices over the previous {TimeRange}.",
              "style": "success"
            },
            "name": "Trending Events",
            "styleSettings": {
              "padding": "20px"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneOperationalLogs\n//| where TimeGenerated > ago(21d) // Change the value in () as you desire e.g. 12h, 10d, 30d. d = day, h = hour.\n| extend DeviceId = tostring(todynamic(Properties).IntuneDeviceId)\n| extend OS = tostring(todynamic(Properties).Os)\n| where Result == \"Success\"\n| where OperationName has \"Enrollment\"\n| where OS == \"Windows\"\n| summarize count()\n| extend TimeRange = (\"Time Range {TimeRange}\")  // You can filter by OS Platform e.g. iOS, Android, Windows. Just replace the vaule between the \" \" and delete the // infront of |.\n//| join kind=leftouter IntuneDevices on DeviceId // DeviceName from IntuneDevices. Can be delayed.\n//| project TimeGenerated, DeviceId, DeviceName, Result, OperationName, OS\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceId, DeviceName, Result, OperationName, OS\n//| sort by TimeGenerated desc",
                    "size": 4,
                    "title": "New Windows Enrollment Count",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "trendup",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "EnrollmentCount",
                      "sizeAggregation": "Sum",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "EnrollmentCount",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Total Windows Enrollments"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\n| where TimeGenerated > ago(120d) //120d is when inactive device gets deleted\n| summarize LastContact = max(TimeGenerated) by SerialNumber\n| where LastContact < ago({deltatime:value}d)\n| summarize count() by SerialNumber\n| summarize count()",
                    "size": 4,
                    "title": "Devices inactive for {deltatime:value} days",
                    "color": "Red",
                    "noDataMessageStyle": 4,
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "History",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 1,
                          "max": 30,
                          "palette": "greenRed"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    }
                  },
                  "name": "Inactive device"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "//IntuneDevices\n//| where OS == \"Windows\"\n//| summarize TimeGenerated = max(TimeGenerated) by DeviceName\n//| summarize count() by DeviceName\n//|summarize count()\n\nIntuneDeviceComplianceOrg\n| where todatetime(LastContact) > ago({deltatime:value}d)\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| summarize count() by SerialNumber\n| summarize count()",
                    "size": 4,
                    "title": "Devices active last {deltatime:value} days",
                    "color": "green",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Text",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ]
                        }
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 0,
                          "palette": "green"
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "TimeRange",
                        "formatter": 1
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "ManagedBy",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "count_DeviceName",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "count_DeviceName",
                      "sizeAggregation": "Sum",
                      "legendMetric": "count_DeviceName",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "count_DeviceName",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "Devices Wiped"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| where TimeGenerated > ago(1d)\n| where OSDescription == \"Windows\"\n| summarize count() by OSDescription",
                    "size": 1,
                    "title": "Windows devices",
                    "color": "green",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "sortBy": [],
                    "tileSettings": {
                      "titleContent": {
                        "formatter": 6
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 12,
                        "formatOptions": {
                          "min": 0,
                          "palette": "green"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "ManagedBy",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "count_DeviceName",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "count_DeviceName",
                      "sizeAggregation": "Sum",
                      "legendMetric": "count_DeviceName",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "count_DeviceName",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "name": "query - 4"
                }
              ]
            },
            "customWidth": "20",
            "name": "Summary Tiles",
            "styleSettings": {
              "margin": "10px",
              "padding": "10px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDevices\r\n| where Result != \"Completed\"\r\n| summarize NumberOfDevices = count() by BatchId\r\n| join (\r\nIntuneDevices\r\n| where Result == \"Completed\"\r\n| project BatchTime = TimeGenerated, BatchId\r\n| summarize arg_max(BatchId, *) by BatchId\r\n) on BatchId\r\n| project BatchTime, NumberOfDevices",
                    "size": 1,
                    "aggregation": 5,
                    "showAnalytics": true,
                    "title": "Number of devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "linechart",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "LastContact",
                          "formatter": 6
                        },
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "showBorder": false,
                      "titleContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Location",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Successful",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "AzureLoc",
                      "locInfoColumn": "Location",
                      "sizeSettings": "Successful",
                      "sizeAggregation": "Count",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "nodeColorField": "EnrollmentCount",
                        "colorAggregation": "Sum",
                        "type": "heatmap",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Users",
                  "styleSettings": {
                    "maxWidth": "50"
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "//let _SnapshotTime = datetime({_SnapshotTime});\r\nlet _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| where OSSecurityUpdateStatus == \"MultipleSecurityUpdatesMissing\"\r\n| summarize by DeviceName, OSVersion, OSBuild\r\n",
                    "size": 1,
                    "title": "Devices missing multiple security updates",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "tileSettings": {
                      "showBorder": false,
                      "titleContent": {
                        "columnMatch": "Title",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Title",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "query - 3",
                  "styleSettings": {
                    "maxWidth": "50",
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Lastweek=\nIntuneDevices\n| where TimeGenerated < ago(7d)\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| where todatetime(LastContact) > ago(30d)\n| summarize count() by OSVersion\n| sort by OSVersion desc\n| extend CustomName = OSVersion\n| extend Version_Lastweek = count_;\nlet Today=\nIntuneDevices\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| where todatetime(LastContact) > ago(30d)\n| summarize count() by OSVersion\n| sort by OSVersion desc\n| extend CustomName = OSVersion\n| extend Version_Today = count_;\nLastweek\n| join kind=inner Today on OSVersion\n| project CustomName, Version_Today, Version_Lastweek, Difference = Version_Today-Version_Lastweek\n| sort by CustomName desc",
                    "size": 3,
                    "title": "Windows OS builds change last week",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "Difference",
                          "formatter": 18,
                          "formatOptions": {
                            "thresholdsOptions": "icons",
                            "thresholdsGrid": [
                              {
                                "operator": ">=",
                                "thresholdValue": "1",
                                "representation": "trendup",
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "<=",
                                "thresholdValue": "-1",
                                "representation": null,
                                "text": "{0}{1}"
                              },
                              {
                                "operator": "Default",
                                "thresholdValue": null,
                                "representation": null,
                                "text": "{0}{1}"
                              }
                            ],
                            "compositeBarSettings": {
                              "labelText": "",
                              "columnSettings": [
                                {
                                  "columnName": "Difference",
                                  "color": "blue"
                                }
                              ]
                            },
                            "customColumnWidthSetting": "16ch"
                          }
                        }
                      ],
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 1
                        }
                      ],
                      "labelSettings": [
                        {
                          "columnId": "CustomName",
                          "label": "Build OS"
                        },
                        {
                          "columnId": "Version_Today",
                          "label": "Today"
                        },
                        {
                          "columnId": "Version_Lastweek",
                          "label": "Last week"
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 1
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": "Blank",
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\n| where todatetime(LastContact) < ago({deltatime:value}d)\n//| summarize count() by DeviceName\n| summarize TimeGenerated = max(TimeGenerated) by LastContact, DeviceName, UserName, OS, UserEmail\n| project LastContact, DeviceName, UserName, UserEmail, OS\n",
                    "size": 3,
                    "title": "Devices inactive for {deltatime:value} days",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "showExportToExcel": true,
                    "exportToExcelOptions": "all",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "showExpandCollapseGrid": true,
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "LastContact",
                          "formatter": 6
                        }
                      ],
                      "sortBy": [
                        {
                          "itemKey": "LastContact",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "LastContact",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "showBorder": false
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true,
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Create",
                          "color": "green"
                        },
                        {
                          "seriesName": "Delete",
                          "color": "red"
                        },
                        {
                          "seriesName": "Other",
                          "color": "gray"
                        },
                        {
                          "seriesName": "Decrypt",
                          "color": "yellow"
                        },
                        {
                          "seriesName": "Sync",
                          "color": "grayBlue"
                        },
                        {
                          "seriesName": "Action",
                          "color": "blue"
                        }
                      ]
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Method Count Pie Chart ",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "customWidth": "80",
            "name": "Count Graphs",
            "styleSettings": {
              "margin": "20px",
              "padding": "20px",
              "maxWidth": "100"
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Devices"
      },
      "name": "Device",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "\n\n## Compliance\nCompliance of devices over the previous {TimeRange}.",
              "style": "success"
            },
            "name": "Trending Events",
            "styleSettings": {
              "padding": "20px"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "### Compliance state on active devices by OS (30days)"
                  },
                  "name": "text - 4"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Comparedate=\nIntuneDeviceComplianceOrg\n| where TimeGenerated < ago({deltatime}d)\n| summarize arg_max(TimeGenerated, *) by SerialNumber, ComplianceState\n| where todatetime(LastContact) > ago(30d)\n| where OS == \"Windows\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend Comparedate_count = count_;\nlet Today=\nIntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by SerialNumber\n| where todatetime(LastContact) > ago(30d)\n| where OS == \"Windows\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend today_count = count_;\nComparedate\n| join kind=inner Today on ComplianceState\n| project CustomName, today_count, Comparedate_count, Difference = today_count-Comparedate_count\n| sort by CustomName desc",
                    "size": 3,
                    "title": "Windows",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "today_count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2,
                            "maximumSignificantDigits": 3
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": null,
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": null,
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false,
                      "size": "auto"
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Comparedate=\nIntuneDeviceComplianceOrg\n| where TimeGenerated < ago({deltatime}d)\n| summarize arg_max(TimeGenerated, *) by DeviceName, ComplianceState\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"Android\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend Comparedate_count = count_;\nlet Today=\nIntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"Android\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend today_count = count_;\nComparedate\n| join kind=inner Today on ComplianceState\n| project CustomName, today_count, Comparedate_count, Difference = today_count-Comparedate_count\n| sort by CustomName desc",
                    "size": 1,
                    "title": "Android",
                    "noDataMessage": "No Android devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "today_count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2,
                            "maximumSignificantDigits": 3
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": null,
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": null,
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Comparedate=\nIntuneDeviceComplianceOrg\n| where TimeGenerated < ago({deltatime}d)\n| summarize arg_max(TimeGenerated, *) by DeviceName, ComplianceState\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"iOS\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend Comparedate_count = count_;\nlet Today=\nIntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"iOS\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend today_count = count_;\nComparedate\n| join kind=inner Today on ComplianceState\n| project CustomName, today_count, Comparedate_count, Difference = today_count-Comparedate_count\n| sort by CustomName desc",
                    "size": 1,
                    "title": "iOS",
                    "noDataMessage": "No iOS devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "today_count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2,
                            "maximumSignificantDigits": 3
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": null,
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": null,
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart - Copy - Copy - Copy"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let Comparedate=\nIntuneDeviceComplianceOrg\n| where TimeGenerated < ago({deltatime}d)\n| summarize arg_max(TimeGenerated, *) by DeviceName, ComplianceState\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"MacOS\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend Comparedate_count = count_;\nlet Today=\nIntuneDeviceComplianceOrg\n| summarize arg_max(TimeGenerated, *) by DeviceName\n| where todatetime(LastContact) > ago(30d)\n| where OSDescription == \"MacOS\"\n| where ComplianceState != \"In grace period\"\n| summarize count() by ComplianceState\n| extend CustomName = ComplianceState\n| extend today_count = count_;\nComparedate\n| join kind=inner Today on ComplianceState\n| project CustomName, today_count, Comparedate_count, Difference = today_count-Comparedate_count\n| sort by CustomName desc",
                    "size": 1,
                    "title": "MacOS",
                    "noDataMessage": "No MacOS devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "CustomName",
                          "sortOrder": 2
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "CustomName",
                        "sortOrder": 2
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "today_count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2,
                            "maximumSignificantDigits": 3
                          }
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Difference",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": ">",
                              "thresholdValue": "0",
                              "representation": "trendup",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "==",
                              "thresholdValue": "0",
                              "representation": null,
                              "text": ""
                            },
                            {
                              "operator": "<",
                              "thresholdValue": "0",
                              "representation": "trenddown",
                              "text": "{0}{1}"
                            },
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": null,
                              "text": "{0}{1}"
                            }
                          ],
                          "compositeBarSettings": {
                            "labelText": "",
                            "columnSettings": []
                          }
                        },
                        "numberFormat": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": false
                          }
                        },
                        "tooltipFormat": {
                          "tooltip": "Delta"
                        }
                      },
                      "showBorder": false
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "CustomName",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Version_Today",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "chartSettings": {
                      "showMetrics": false,
                      "showLegend": true
                    },
                    "mapSettings": {
                      "locInfo": "LatLong",
                      "sizeSettings": "Version_Today",
                      "sizeAggregation": "Sum",
                      "legendMetric": "Version_Today",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "type": "heatmap",
                        "colorAggregation": "Sum",
                        "nodeColorField": "Version_Today",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "name": "Action Count Pie Chart - Copy - Copy - Copy - Copy"
                }
              ]
            },
            "customWidth": "20",
            "name": "Summary Tiles",
            "styleSettings": {
              "margin": "10px",
              "padding": "10px",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 9,
                  "content": {
                    "version": "KqlParameterItem/1.0",
                    "crossComponentResources": [
                      "/subscriptions/73946027-4ab3-465b-af6c-66d4778c9b7c/resourcegroups/loganalytics/providers/microsoft.operationalinsights/workspaces/logsanalyticsnorth"
                    ],
                    "parameters": [
                      {
                        "id": "17a3f56c-2924-4ba7-a211-4cdf9ef3219c",
                        "version": "KqlParameterItem/1.0",
                        "name": "ComplianceState",
                        "label": "Compliance status",
                        "type": 2,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "",
                        "delimiter": " or ",
                        "value": [
                          "ComplianceState eq 'Noncompliant'",
                          "ComplianceState eq 'Compliant'",
                          "ComplianceState eq 'InGracePeriod'"
                        ],
                        "typeSettings": {
                          "additionalResourceOptions": [
                            "value::all"
                          ],
                          "selectAllValue": "ComplianceState ne '9A09757A-6676-43A7-A0F1-F749A406142C'"
                        },
                        "jsonData": "[\r\n    { \"label\": \"Compliant\", \"value\": \"ComplianceState eq 'Compliant'\" },\r\n    { \"label\": \"In grace period\", \"value\": \"ComplianceState eq 'InGracePeriod'\" },\r\n    { \"label\": \"Managed by ConfigMgr\", \"value\": \"ComplianceState eq 'ConfigManager'\" },\r\n    { \"label\": \"Not compliant\", \"value\": \"ComplianceState eq 'Noncompliant'\" },\r\n    { \"label\": \"Not evaluated\", \"value\": \"ComplianceState eq 'Unknown'\" }\r\n]\r\n"
                      },
                      {
                        "id": "93093429-1870-4771-bdab-54b91308bcee",
                        "version": "KqlParameterItem/1.0",
                        "name": "OS",
                        "type": 2,
                        "isRequired": true,
                        "multiSelect": true,
                        "quote": "",
                        "delimiter": " or ",
                        "value": [
                          "value::all"
                        ],
                        "typeSettings": {
                          "additionalResourceOptions": [
                            "value::all"
                          ],
                          "selectAllValue": "DeviceType ne '9A09757A-6676-43A7-A0F1-F749A406142C'"
                        },
                        "jsonData": "[\r\n    { \"label\": \"Android (AOSP)\", \"value\": \"DeviceType eq 'AndroidAOSP'\" },\r\n    { \"label\": \"Android (device administrator)\", \"value\": \"DeviceType eq 'Android'\" },\r\n    { \"label\": \"Android (fully managed/dedicated)\", \"value\": \"DeviceType eq 'AndroidEnterprise'\" },\r\n    { \"label\": \"Android (work profile)\", \"value\": \"DeviceType eq 'AndroidForWork'\" },\r\n    { \"label\": \"iOS\", \"value\": \"DeviceType eq 'IPhone' or DeviceType eq 'IPad' or DeviceType eq 'IPod'\" },\r\n    { \"label\": \"Linux\", \"value\": \"DeviceType eq 'Linux'\" },\r\n    { \"label\": \"macOS\", \"value\": \"DeviceType eq 'MacMDM'\" },\r\n    { \"label\": \"Windows\", \"value\": \"DeviceType eq 'Desktop' or DeviceType eq 'Windows' or DeviceType eq 'WinEmbedded' or DeviceType eq 'SurfaceHub'\" },\r\n    { \"label\": \"Windows Holographic\", \"value\": \"DeviceType eq 'HoloLens'\" },\r\n    { \"label\": \"Windows Mobile\", \"value\": \"DeviceType eq 'WindowsPhone'\" },\r\n    { \"label\": \"Other\", \"value\": \"DeviceType eq 'WinMO6' or DeviceType eq 'Nokia' or DeviceType eq 'Mac' or DeviceType eq 'Blackberry' or DeviceType eq 'Palm' or DeviceType eq 'Unknown'\" }\r\n]"
                      },
                      {
                        "id": "cfcf5e20-05eb-4e7b-985a-25ac582e76d7",
                        "version": "KqlParameterItem/1.0",
                        "name": "GraphVersion",
                        "type": 2,
                        "isRequired": true,
                        "isHiddenWhenLocked": true,
                        "typeSettings": {
                          "additionalResourceOptions": [],
                          "showDefault": false
                        },
                        "jsonData": "[\r\n    { \"label\": \"v1.0\", \"value\": \"v1.0\" },\r\n    { \"label\": \"beta\", \"value\": \"beta\" }\r\n]\r\n",
                        "value": "v1.0"
                      }
                    ],
                    "style": "above",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces"
                  },
                  "name": "Device Compliance Parameters"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "{\"version\":\"IntuneQuery/1.0\",\"timeContext\":null,\"queryVersion\":\"{GraphVersion}\",\"body\":\"{\\n    \\\"name\\\": \\\"deviceComplianceTrend\\\",\\n\\t\\\"filter\\\": \\\"({ComplianceState}) and ({OS})\\\",\\n\\t\\\"select\\\": [\\\"Date\\\", \\\"ComplianceState\\\", \\\"Count\\\"],\\n\\t\\\"top\\\": 10000\\n}\"}",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Device compliance (60 day trend)",
                    "queryType": 11,
                    "visualization": "timechart",
                    "tileSettings": {
                      "showBorder": false,
                      "titleContent": {
                        "columnMatch": "ComplianceState",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "Count",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "ComplianceState",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Count",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    }
                  },
                  "name": "Device compliance (60 day trend)"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\r\n| summarize arg_max(TimeGenerated, *) by DeviceName\r\n| where todatetime(LastContact) > ago(30d)\r\n| where ComplianceState == \"Not compliant\"\r\n| project ComplianceState, DeviceName, LastContact",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "Active and non-compliant devices",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "LastContact",
                          "formatter": 6
                        },
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "showBorder": false,
                      "titleContent": {
                        "columnMatch": "Result",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "EnrollmentCount",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        },
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "graphSettings": {
                      "type": 0,
                      "topContent": {
                        "columnMatch": "Location",
                        "formatter": 1
                      },
                      "centerContent": {
                        "columnMatch": "Successful",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "maximumSignificantDigits": 3,
                            "maximumFractionDigits": 2
                          }
                        }
                      }
                    },
                    "mapSettings": {
                      "locInfo": "AzureLoc",
                      "locInfoColumn": "Location",
                      "sizeSettings": "Successful",
                      "sizeAggregation": "Count",
                      "legendMetric": "EnrollmentCount",
                      "legendAggregation": "Sum",
                      "itemColorSettings": {
                        "nodeColorField": "EnrollmentCount",
                        "colorAggregation": "Sum",
                        "type": "heatmap",
                        "heatmapPalette": "greenRed"
                      }
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Users",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "IntuneDeviceComplianceOrg\r\n| where isnotempty(DeviceHealthThreatLevel)\r\n| where DeviceHealthThreatLevel != \"Secured\"\r\n| where DeviceHealthThreatLevel != \"Unknown\"\r\n| summarize arg_max(TimeGenerated, *) by DeviceName\r\n| project DeviceName, UserName , DeviceHealthThreatLevel",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "Devices with risk status",
                    "timeContextFromParameter": "TimeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "count_",
                          "formatter": 4,
                          "formatOptions": {
                            "palette": "blue"
                          }
                        }
                      ]
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibilities": [
                    {
                      "parameterName": "AdminUser",
                      "comparison": "isEqualTo"
                    },
                    {
                      "parameterName": "Operation",
                      "comparison": "isEqualTo"
                    }
                  ],
                  "name": "Audited Application Events ",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "customWidth": "80",
            "name": "Count Graphs",
            "styleSettings": {
              "margin": "20px",
              "padding": "20px"
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Compliance"
      },
      "name": "Compliance",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "crossComponentResources": [
                "{mappedWorkspace}"
              ],
              "parameters": [
                {
                  "id": "7a2bb320-fa9c-45c8-bbf6-942c8b3a4b0e",
                  "version": "KqlParameterItem/1.0",
                  "name": "mappedSubscription",
                  "label": "subscription",
                  "type": 6,
                  "isRequired": true,
                  "value": "/subscriptions/a8e9fa59-deeb-4837-b5d4-5d838382294a",
                  "isHiddenWhenLocked": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "includeAll": true,
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  }
                },
                {
                  "id": "01c6d66e-3f87-4e8a-8be6-0accbe4f4036",
                  "version": "KqlParameterItem/1.0",
                  "name": "mappedWorkspace",
                  "label": "workspace",
                  "type": 5,
                  "isRequired": true,
                  "query": "resources\r\n| where type == \"microsoft.operationalinsights/workspaces\"\r\n| where \"{mappedSubscription:subscriptionId}\" == subscriptionId\r\n| project id",
                  "crossComponentResources": [
                    "{mappedSubscription}"
                  ],
                  "value": "/subscriptions/a8e9fa59-deeb-4837-b5d4-5d838382294a/resourceGroups/CSUB_LOG_ANALYTIC/providers/Microsoft.OperationalInsights/workspaces/CSUB-LOG-ANALYTIC",
                  "isHiddenWhenLocked": true,
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 86400000
                  },
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources"
                },
                {
                  "id": "03761a72-d969-426b-ba54-d1e709610b2d",
                  "version": "KqlParameterItem/1.0",
                  "name": "_WorkbookContext",
                  "label": "Workbook Context",
                  "type": 1,
                  "description": "Whether workbook is opened standalone or as part of the Hub.",
                  "isRequired": true,
                  "isHiddenWhenLocked": true,
                  "criteriaData": [
                    {
                      "criteriaContext": {
                        "operator": "Default",
                        "resultValType": "static",
                        "resultVal": "Focused"
                      }
                    }
                  ],
                  "timeContext": {
                    "durationMs": 86400000
                  }
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "parameters - 4"
          },
          {
            "type": 1,
            "content": {
              "json": "Use Windows Update for Business reports to check the progress of Windows update deployments and report on devices with compliance issues. This data is updated every 24 hours."
            },
            "name": "IntroQualityUpdate"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| summarize SecurityUpdateStatus = count() by OSSecurityUpdateStatus",
              "size": 3,
              "title": "Security update status",
              "noDataMessage": "No devices",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces",
              "crossComponentResources": [
                "{mappedWorkspace}"
              ],
              "visualization": "piechart",
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "TotalDevices",
                    "formatter": 0,
                    "numberFormat": {
                      "unit": 17,
                      "options": {
                        "style": "decimal",
                        "maximumFractionDigits": 2
                      }
                    }
                  }
                ]
              },
              "tileSettings": {
                "titleContent": {
                  "columnMatch": "DevicesCount",
                  "formatter": 1
                },
                "subtitleContent": {
                  "columnMatch": "DevicesTakingFeatureUpdate",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "TotalDevices",
                  "formatter": 18,
                  "formatOptions": {
                    "thresholdsOptions": "icons",
                    "thresholdsGrid": [
                      {
                        "operator": "Default",
                        "thresholdValue": null,
                        "representation": "success",
                        "text": ""
                      }
                    ]
                  }
                },
                "rightContent": {
                  "columnMatch": "TotalDevices",
                  "formatter": 1,
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "style": "decimal",
                      "maximumFractionDigits": 2
                    }
                  }
                },
                "secondaryContent": {
                  "columnMatch": "ViewDetails",
                  "formatter": 7,
                  "formatOptions": {
                    "linkTarget": "WorkbookTemplate",
                    "linkIsContextBlade": true,
                    "workbookContext": {
                      "componentIdSource": "workbook",
                      "resourceIdsSource": "workbook",
                      "templateIdSource": "static",
                      "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                      "typeSource": "workbook",
                      "gallerySource": "workbook",
                      "locationSource": "default",
                      "passSpecificParams": true,
                      "templateParameters": [
                        {
                          "name": "mappedSubscription",
                          "source": "parameter",
                          "value": "mappedSubscription"
                        },
                        {
                          "name": "mappedWorkspace",
                          "source": "parameter",
                          "value": "mappedWorkspace"
                        },
                        {
                          "name": "Title",
                          "source": "static",
                          "value": "In Service feature update"
                        },
                        {
                          "name": "DataQuery",
                          "source": "static",
                          "value": " let _SnapshotTime = datetime({_SnapshotTime}); UCClient | where TimeGenerated == _SnapshotTime | where OSFeatureUpdateStatus == \"InService\"  | summarize by AzureADDeviceId, DeviceName, OSVersion, OSFeatureUpdateStatus"
                        }
                      ]
                    }
                  }
                },
                "showBorder": false
              }
            },
            "customWidth": "0",
            "name": "Security update status",
            "styleSettings": {
              "margin": "10px 10px",
              "padding": "0px",
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| extend OSFeatureUpdateStatusModified = iff(OSFeatureUpdateStatus == \"Unknown\", \"Windows Insider Program\", OSFeatureUpdateStatus)\r\n| summarize FeatureUpdateStatus = count() by OSFeatureUpdateStatusModified",
              "size": 3,
              "title": "Feature update status",
              "noDataMessage": "No feature updates",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces",
              "crossComponentResources": [
                "{mappedWorkspace}"
              ],
              "visualization": "piechart",
              "gridSettings": {
                "sortBy": [
                  {
                    "itemKey": "LatestComplianceStatus",
                    "sortOrder": 1
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "LatestComplianceStatus",
                  "sortOrder": 1
                }
              ],
              "tileSettings": {
                "titleContent": {
                  "columnMatch": "DevicesCount",
                  "formatter": 1
                },
                "subtitleContent": {
                  "columnMatch": "DevicesTakingFeatureUpdate",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "OSSecurityUpdateStatus",
                  "formatter": 18,
                  "formatOptions": {
                    "thresholdsOptions": "icons",
                    "thresholdsGrid": [
                      {
                        "operator": "Default",
                        "thresholdValue": null,
                        "representation": "3",
                        "text": ""
                      }
                    ]
                  }
                },
                "rightContent": {
                  "columnMatch": "TotalDevices",
                  "formatter": 1,
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "style": "decimal",
                      "maximumFractionDigits": 2
                    }
                  }
                },
                "secondaryContent": {
                  "columnMatch": "ViewDetails",
                  "formatter": 7,
                  "formatOptions": {
                    "linkTarget": "WorkbookTemplate",
                    "linkIsContextBlade": true,
                    "workbookContext": {
                      "componentIdSource": "workbook",
                      "resourceIdsSource": "workbook",
                      "templateIdSource": "static",
                      "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                      "typeSource": "workbook",
                      "gallerySource": "workbook",
                      "locationSource": "default",
                      "passSpecificParams": true,
                      "templateParameters": [
                        {
                          "name": "mappedSubscription",
                          "source": "parameter",
                          "value": "mappedSubscription"
                        },
                        {
                          "name": "mappedWorkspace",
                          "source": "parameter",
                          "value": "mappedWorkspace"
                        },
                        {
                          "name": "Title",
                          "source": "static",
                          "value": "End of Service feature update"
                        },
                        {
                          "name": "DataQuery",
                          "source": "static",
                          "value": "let _SnapshotTime = datetime({_SnapshotTime}); UCClient | where TimeGenerated == _SnapshotTime | where OSFeatureUpdateStatus == \"EndOfService\"  | summarize by AzureADDeviceId, DeviceName, OSVersion, OSFeatureUpdateStatus"
                        }
                      ]
                    }
                  }
                },
                "showBorder": false
              }
            },
            "customWidth": "0",
            "name": "OverallFeatureUpdateStatusChart",
            "styleSettings": {
              "margin": "10px 10px",
              "showBorder": true
            }
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "45ff6d41-655d-48b7-9887-aab0dbe5b78c",
                  "cellValue": "selTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Feature updates",
                  "subTarget": "FeatureUpdates",
                  "style": "link"
                },
                {
                  "id": "ebf24b8e-0a03-415d-9018-3bdd02138627",
                  "cellValue": "selTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Quality updates",
                  "subTarget": "QualityUpdates",
                  "style": "link"
                },
                {
                  "id": "f1304629-bf17-4448-8784-c3facb43a74c",
                  "cellValue": "selTab",
                  "linkTarget": "parameter",
                  "linkLabel": "Delivery Optimization",
                  "subTarget": "DeliveryOptimization",
                  "style": "link"
                }
              ]
            },
            "name": "links - 3"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "The Feature Updates workbook provides information about the status of feature updates across all devices.\r\n\r\n\r\n*Note: A device can be in multiple deployments. The data here reflects devices that are taking updates across **all deployments***."
                  },
                  "name": "IntroQualityUpdate"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| where OSFeatureUpdateStatus == \"InService\"\r\n| extend DevicesTakingFeatureUpdate = \"Installed with in service feature update\"\r\n| extend DevicesCount = \"Devices count\"\r\n| extend ViewDetails = \"View Details\"\r\n| summarize TotalDevices=count() by DevicesTakingFeatureUpdate, DevicesCount, ViewDetails\r\n\r\n",
                    "size": 3,
                    "title": "In Service feature update",
                    "noDataMessage": "No devices",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "TotalDevices",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal",
                              "maximumFractionDigits": 2
                            }
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "DevicesCount",
                        "formatter": 1
                      },
                      "subtitleContent": {
                        "columnMatch": "DevicesTakingFeatureUpdate",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetails",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              },
                              {
                                "name": "Title",
                                "source": "static",
                                "value": "In Service feature update"
                              },
                              {
                                "name": "DataQuery",
                                "source": "static",
                                "value": " let _SnapshotTime = datetime({_SnapshotTime}); UCClient | where TimeGenerated == _SnapshotTime | where OSFeatureUpdateStatus == \"InService\"  | summarize by AzureADDeviceId, DeviceName, OSVersion, OSFeatureUpdateStatus"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "0",
                  "name": "In Service feature update",
                  "styleSettings": {
                    "margin": "10px 10px",
                    "padding": "0px",
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| where OSFeatureUpdateStatus == \"EndOfService\"\r\n| extend DevicesTakingFeatureUpdate = \"Installed with out of service feature update\"\r\n| extend DevicesCount = \"Devices count\"\r\n| extend ViewDetails = \"View Details\"\r\n| summarize TotalDevices=count() by DevicesTakingFeatureUpdate, DevicesCount, ViewDetails\r\n",
                    "size": 3,
                    "title": "End of Service feature update",
                    "noDataMessage": "No feature updates",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "gridSettings": {
                      "sortBy": [
                        {
                          "itemKey": "LatestComplianceStatus",
                          "sortOrder": 1
                        }
                      ]
                    },
                    "sortBy": [
                      {
                        "itemKey": "LatestComplianceStatus",
                        "sortOrder": 1
                      }
                    ],
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "DevicesCount",
                        "formatter": 1
                      },
                      "subtitleContent": {
                        "columnMatch": "DevicesTakingFeatureUpdate",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "OSSecurityUpdateStatus",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "3",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetails",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              },
                              {
                                "name": "Title",
                                "source": "static",
                                "value": "End of Service feature update"
                              },
                              {
                                "name": "DataQuery",
                                "source": "static",
                                "value": "let _SnapshotTime = datetime({_SnapshotTime}); UCClient | where TimeGenerated == _SnapshotTime | where OSFeatureUpdateStatus == \"EndOfService\"  | summarize by AzureADDeviceId, DeviceName, OSVersion, OSFeatureUpdateStatus"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "0",
                  "name": "End of Service feature update",
                  "styleSettings": {
                    "margin": "10px 10px",
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nlet maxTimeGenerated = UCClient | where _SnapshotTime >= ago(30d)| summarize max(_SnapshotTime);\r\nlet warningBarrier = 6;\r\nlet today = now();\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| extend Status=iff(OSFeatureUpdateStatus has 'InService', iff(OSFeatureUpdateStatus has 'EndOfService', 'Unknown', 'InService'), iff(OSFeatureUpdateStatus has 'EndOfService', 'Unknown', 'InService'))\r\n| where Status != \"Unknown\" and OSVersion  != \"Windows Insider Program\"\r\n| extend diff = datetime_diff('month', OSFeatureUpdateEOSTime, today)\r\n| where diff <= warningBarrier and diff > 0\r\n| extend Compliant = \"Nearing EOS\"\r\n| extend Title = \"Near to end of support\"\r\n| extend Subtitle = \"Ending support within 6 months\"\r\n| extend ViewDetails = \"View Details\"\r\n| summarize Devices=count() by Compliant, Title, Subtitle, ViewDetails;\r\n",
                    "size": 3,
                    "title": "Nearing EOS",
                    "noDataMessage": "No devices ending service soon",
                    "noDataMessageStyle": 5,
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "SecurityUpdateStatus",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal",
                              "maximumFractionDigits": 2
                            }
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Title",
                        "formatter": 1
                      },
                      "subtitleContent": {
                        "columnMatch": "Subtitle",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "count_",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "2",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Devices",
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetails",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              },
                              {
                                "name": "Title",
                                "source": "static",
                                "value": "Devices nearing end of service within 6 months"
                              },
                              {
                                "name": "DataQuery",
                                "source": "static",
                                "value": "let _SnapshotTime = datetime({_SnapshotTime}); let maxTimeGenerated = UCClient | where _SnapshotTime >= ago(30d)| summarize max(_SnapshotTime); let warningBarrier = 6; let today = now(); UCClient | where TimeGenerated == _SnapshotTime | extend Status=iff(OSFeatureUpdateStatus has 'InService', iff(OSFeatureUpdateStatus has 'EndOfService', 'Unknown', 'InService'), iff(OSFeatureUpdateStatus has 'EndOfService', 'Unknown', 'InService')) | where Status != \"Unknown\" and OSVersion  != \"Windows Insider Program\" | extend diff = datetime_diff('month', OSFeatureUpdateEOSTime, today) | where diff <= warningBarrier and diff > 0 | summarize by AzureADDeviceId, DeviceName, OSVersion, OSFeatureUpdateStatus, OSFeatureUpdateEOSTime;"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "0",
                  "name": "EOSStatus - Copy",
                  "styleSettings": {
                    "margin": "10px 10px",
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nlet UpdateAlert = UCUpdateAlert\r\n| where TimeGenerated == _SnapshotTime\r\n| where UpdateCategory==\"WindowsFeatureUpdate\"\r\n| where AlertStatus == \"Active\";\r\nUpdateAlert\r\n| where AlertStatus == \"Active\"\r\n| extend Title=\"Alerts count\", Subtitle = \"Update alerts\"\r\n| extend ViewDetails = \"View details\"\r\n| summarize count() by AlertStatus, Title, Subtitle, ViewDetails",
                    "size": 3,
                    "title": "Active alerts",
                    "noDataMessage": "No alerts",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "TotalAlerts",
                          "formatter": 0,
                          "numberFormat": {
                            "unit": 17,
                            "options": {
                              "style": "decimal",
                              "maximumFractionDigits": 2
                            }
                          }
                        }
                      ]
                    },
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Title"
                      },
                      "subtitleContent": {
                        "columnMatch": "Subtitle",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "TotalAlerts",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "3",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "count_",
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetails",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/KPI Card Detail",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              },
                              {
                                "name": "Title",
                                "source": "static",
                                "value": "Active alerts"
                              },
                              {
                                "name": "DataQuery",
                                "source": "static",
                                "value": "let _SnapshotTime = datetime({_SnapshotTime}); UCUpdateAlert | where TimeGenerated == _SnapshotTime | where AlertStatus == \"Active\" | where UpdateCategory == \"WindowsFeatureUpdate\" | summarize Devices=dcount(AzureADDeviceId) by ErrorCode, AlertSubtype, AlertClassification, AlertType, UpdateCategory, TargetBuild   | project-reorder AlertSubtype, AlertClassification, ErrorCode, TargetBuild, Devices, AlertType   | sort by Devices"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": false
                    }
                  },
                  "customWidth": "0",
                  "name": "TotalAlerts",
                  "styleSettings": {
                    "margin": "10px 10px",
                    "showBorder": true
                  }
                },
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "tabs",
                    "links": [
                      {
                        "id": "45ff6d41-655d-48b7-9887-aab0dbe5b78c",
                        "cellValue": "selTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Update status",
                        "subTarget": "UpdateStatus",
                        "style": "link"
                      },
                      {
                        "id": "ebf24b8e-0a03-415d-9018-3bdd02138627",
                        "cellValue": "selTab",
                        "linkTarget": "parameter",
                        "linkLabel": "Device status",
                        "subTarget": "DeviceStatus",
                        "style": "link"
                      }
                    ]
                  },
                  "name": "links - 3"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClientUpdateStatus\r\n| where TimeGenerated == _SnapshotTime\r\n| where UpdateCategory == \"WindowsFeatureUpdate\" \r\n| summarize count() by TargetVersion",
                          "size": 3,
                          "showAnalytics": true,
                          "title": "Target version",
                          "noDataMessage": "No devices",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "piechart",
                          "chartSettings": {
                            "createOtherGroup": null,
                            "seriesLabelSettings": [
                              {
                                "seriesName": "",
                                "label": "Unknown"
                              },
                              {
                                "seriesName": "Installed",
                                "color": "blue"
                              },
                              {
                                "seriesName": "Installing",
                                "color": "turquoise"
                              },
                              {
                                "seriesName": "Offering",
                                "color": "blueDarkDark"
                              },
                              {
                                "seriesName": "Cancelled",
                                "color": "red"
                              }
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 1
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "33",
                        "showPin": false,
                        "name": "TargetVersion"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCUpdateAlert\r\n| where TimeGenerated == _SnapshotTime\r\n| where UpdateCategory == \"WindowsFeatureUpdate\" and AlertSubtype == \"SafeguardHold\"\r\n| summarize count() by TargetVersion\r\n",
                          "size": 3,
                          "showAnalytics": true,
                          "title": "Safeguard holds",
                          "noDataMessage": "No safeguard holds",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "piechart",
                          "tileSettings": {
                            "showBorder": false,
                            "titleContent": {
                              "columnMatch": "TargetVersion",
                              "formatter": 1
                            },
                            "leftContent": {
                              "columnMatch": "count_",
                              "formatter": 12,
                              "formatOptions": {
                                "palette": "auto"
                              },
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            }
                          },
                          "chartSettings": {
                            "yAxis": [
                              "count_"
                            ],
                            "seriesLabelSettings": [
                              {
                                "seriesName": "Cancelling",
                                "label": "Unknown"
                              },
                              {
                                "seriesName": "",
                                "label": "Unknown"
                              },
                              {
                                "seriesName": "Installed",
                                "color": "blue"
                              },
                              {
                                "seriesName": "Installing",
                                "color": "turquoise"
                              },
                              {
                                "seriesName": "Cancelled",
                                "color": "red"
                              },
                              {
                                "seriesName": "Offering",
                                "color": "blueDarkDark"
                              }
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 1
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "33",
                        "name": "SafeguardHolds"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCUpdateAlert \r\n| where TimeGenerated == _SnapshotTime\r\n| where AlertStatus == \"Active\" and UpdateCategory==\"WindowsFeatureUpdate\"  and TargetVersion != \"Windows Insider Program\"\r\n| summarize count() by AlertClassification\r\n",
                          "size": 3,
                          "showAnalytics": true,
                          "title": "Update alerts",
                          "noDataMessage": "No alerts",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "piechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "",
                                "label": "Unknown"
                              },
                              {
                                "seriesName": "Error",
                                "color": "red"
                              },
                              {
                                "seriesName": "Warning",
                                "color": "orange"
                              }
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 1
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "33",
                        "name": "Alerts(UpdateIssues)"
                      },
                      {
                        "type": 1,
                        "content": {
                          "json": ""
                        },
                        "customWidth": "33",
                        "name": "text - 6"
                      },
                      {
                        "type": 11,
                        "content": {
                          "version": "LinkItem/1.0",
                          "style": "paragraph",
                          "links": [
                            {
                              "id": "66b8d4e6-db1b-412b-bcb9-bf87ab896472",
                              "linkTarget": "WorkbookTemplate",
                              "linkLabel": "View more details",
                              "style": "link",
                              "linkIsContextBlade": true,
                              "workbookContext": {
                                "componentIdSource": "workbook",
                                "resourceIdsSource": "workbook",
                                "templateIdSource": "static",
                                "templateId": "community-workbooks/UpdateCompliance/Safeguard hold view",
                                "typeSource": "workbook",
                                "gallerySource": "workbook",
                                "locationSource": "default"
                              }
                            }
                          ]
                        },
                        "customWidth": "33",
                        "name": "links - 7"
                      },
                      {
                        "type": 1,
                        "content": {
                          "json": "<p style='font-weight:500'>Update deployment status</P>"
                        },
                        "name": "UpdateDeploymentStatusText",
                        "styleSettings": {
                          "margin": "0px 0px -20px 0px"
                        }
                      },
                      {
                        "type": 9,
                        "content": {
                          "version": "KqlParameterItem/1.0",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "parameters": [
                            {
                              "id": "5cd36655-0307-49d5-9b09-3e7a37514a9f",
                              "version": "KqlParameterItem/1.0",
                              "name": "_TargetVersion",
                              "label": "Target Version",
                              "type": 2,
                              "description": "Displays the target versions selected",
                              "isRequired": true,
                              "multiSelect": true,
                              "quote": "'",
                              "delimiter": ",",
                              "query": "UCClientUpdateStatus\r\n| where TimeGenerated >= datetime({_SnapshotTime})\r\n| where UpdateCategory == \"WindowsFeatureUpdate\" and isnotempty(TargetKBNumber) and TargetVersion != \"Windows Insider Program\"\r\n| summarize by TargetVersion",
                              "crossComponentResources": [
                                "{mappedWorkspace}"
                              ],
                              "value": [
                                "value::all"
                              ],
                              "typeSettings": {
                                "additionalResourceOptions": [
                                  "value::all"
                                ],
                                "selectAllValue": "ALL",
                                "showDefault": false
                              },
                              "defaultValue": "value::all",
                              "queryType": 0,
                              "resourceType": "microsoft.operationalinsights/workspaces"
                            }
                          ],
                          "style": "pills",
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces"
                        },
                        "name": "Filters"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "// intialitze filters\r\nlet _SnapshotTime = datetime({_SnapshotTime});\r\nlet _TargetVersion =\"{_TargetVersion}\";\r\n// declare constants\r\nlet KBLink = \"https://support.microsoft.com/help/\";\r\n// Prepare the subtables\r\nlet UCClientUpdateStatus_Info = UCClientUpdateStatus | where TimeGenerated == _SnapshotTime;                               \r\nlet UCUpdateAlert_Info = UCUpdateAlert | where TimeGenerated == _SnapshotTime;\r\n// Business logic _ResourceId\r\n// Filter the windows feature updates reatil builds\r\nlet AggregateDeviceCounts = UCClientUpdateStatus_Info \r\n| where UpdateCategory == \"WindowsFeatureUpdate\" and TargetVersion != \"Windows Insider Program\"\r\n| where iff(_TargetVersion has \"ALL\", true, _TargetVersion has tostring(TargetVersion))\r\n| summarize \r\n    TotalDevices=count(),\r\n    InstalledCount=dcountif(AzureADDeviceId, ClientState == \"Installed\") by TargetVersion, UpdateClassification\r\n| extend TotalProgress=round((InstalledCount * 1.0/ TotalDevices) * 100, 1);\r\n// prepate alert number for each target version aggreagre by error code\r\nlet AggregateAlertSubTypeCount = UCUpdateAlert_Info \r\n| where  UpdateCategory == \"WindowsFeatureUpdate\" and AlertStatus == \"Active\"\r\n| summarize Alerts=dcount(ErrorCode) by  TargetVersion, UpdateCategory, UpdateClassification;\r\n// join for final output\r\nAggregateDeviceCounts\r\n| join kind=leftouter (AggregateAlertSubTypeCount) on TargetVersion\r\n| summarize by TargetVersion,  TotalProgress, Alerts, TotalDevices, UpdateCategory, UpdateClassification\r\n| project-reorder TargetVersion, TotalProgress, Alerts, TotalDevices\r\n",
                          "size": 0,
                          "showAnalytics": true,
                          "noDataMessage": "No devices",
                          "exportedParameters": [
                            {
                              "fieldName": "TotalDevices",
                              "parameterName": "_SelectedDevices"
                            },
                            {
                              "fieldName": "TargetVersion",
                              "parameterName": "_SelectedTargetVersion",
                              "parameterType": 1
                            },
                            {
                              "fieldName": "TargetBuild",
                              "parameterName": "_SelectedTargetBuild",
                              "parameterType": 1
                            }
                          ],
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "table",
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "TargetVersion",
                                "formatter": 0,
                                "formatOptions": {
                                  "aggregation": "Count"
                                }
                              },
                              {
                                "columnMatch": "TotalProgress",
                                "formatter": 4,
                                "formatOptions": {
                                  "palette": "blue",
                                  "customColumnWidthSetting": "150px"
                                },
                                "numberFormat": {
                                  "unit": 1,
                                  "options": {
                                    "style": "decimal"
                                  }
                                }
                              },
                              {
                                "columnMatch": "Alerts",
                                "formatter": 18,
                                "formatOptions": {
                                  "linkTarget": "WorkbookTemplate",
                                  "linkIsContextBlade": false,
                                  "thresholdsOptions": "icons",
                                  "thresholdsGrid": [
                                    {
                                      "operator": ">",
                                      "thresholdValue": "8",
                                      "representation": "3",
                                      "text": "{0}{1}"
                                    },
                                    {
                                      "operator": "is Empty",
                                      "thresholdValue": "",
                                      "representation": "Blank",
                                      "text": "0"
                                    },
                                    {
                                      "operator": "Default",
                                      "thresholdValue": null,
                                      "representation": "Blank",
                                      "text": "{0}{1}"
                                    }
                                  ],
                                  "workbookContext": {
                                    "componentIdSource": "workbook",
                                    "resourceIdsSource": "workbook",
                                    "templateIdSource": "static",
                                    "templateId": "community-workbooks/UpdateCompliance/Alerts for target build",
                                    "typeSource": "workbook",
                                    "gallerySource": "workbook",
                                    "locationSource": "default",
                                    "passSpecificParams": true,
                                    "templateParameters": [
                                      {
                                        "name": "_TotalAlerts",
                                        "source": "column",
                                        "value": "Alerts"
                                      },
                                      {
                                        "name": "_TargetVersion",
                                        "source": "column",
                                        "value": "TargetVersion"
                                      },
                                      {
                                        "name": "mappedSubscription",
                                        "source": "parameter",
                                        "value": "mappedSubscription"
                                      },
                                      {
                                        "name": "mappedWorkspace",
                                        "source": "parameter",
                                        "value": "mappedWorkspace"
                                      },
                                      {
                                        "name": "_UpdateReleaseTime",
                                        "source": "column",
                                        "value": "UpdateReleaseTime"
                                      },
                                      {
                                        "name": "_TargetKBNumber",
                                        "source": "column",
                                        "value": "TargetKBNumber"
                                      },
                                      {
                                        "name": "_TargetBuild",
                                        "source": "column",
                                        "value": "TargetBuild"
                                      },
                                      {
                                        "name": "_UpdateCategory",
                                        "source": "column",
                                        "value": "UpdateCategory"
                                      }
                                    ]
                                  }
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": true
                                  }
                                }
                              },
                              {
                                "columnMatch": "TotalDevices",
                                "formatter": 1,
                                "formatOptions": {
                                  "linkTarget": "WorkbookTemplate",
                                  "linkIsContextBlade": false,
                                  "workbookContext": {
                                    "componentIdSource": "workbook",
                                    "resourceIdsSource": "workbook",
                                    "templateIdSource": "static",
                                    "templateId": "community-workbooks/UpdateCompliance/Target version",
                                    "typeSource": "workbook",
                                    "gallerySource": "workbook",
                                    "locationSource": "default",
                                    "passSpecificParams": true,
                                    "templateParameters": [
                                      {
                                        "name": "_TargetVersion",
                                        "source": "column",
                                        "value": "TargetVersion"
                                      },
                                      {
                                        "name": "_TargetBuild",
                                        "source": "column",
                                        "value": "TargetBuild"
                                      },
                                      {
                                        "name": "_DeviceCount",
                                        "source": "column",
                                        "value": "TotalDevices"
                                      },
                                      {
                                        "name": "_UpdateClassification",
                                        "source": "column",
                                        "value": "UpdateClassification"
                                      },
                                      {
                                        "name": "_DeploymentId",
                                        "source": "column",
                                        "value": "DeploymentId"
                                      },
                                      {
                                        "name": "_UpdateReleaseTime",
                                        "source": "column",
                                        "value": "UpdateReleaseTime"
                                      },
                                      {
                                        "name": "mappedWorkspace",
                                        "source": "parameter",
                                        "value": "mappedWorkspace"
                                      },
                                      {
                                        "name": "mappedSubscription",
                                        "source": "parameter",
                                        "value": "mappedSubscription"
                                      },
                                      {
                                        "name": "_UpdateCategory",
                                        "source": "column",
                                        "value": "UpdateCategory"
                                      },
                                      {
                                        "name": "_TargetKBNumber",
                                        "source": "column",
                                        "value": "TargetKBNumber"
                                      }
                                    ]
                                  },
                                  "bladeOpenContext": {
                                    "bladeName": "UsageNotebookBlade",
                                    "extensionName": "AppInsightsExtension",
                                    "bladeParameters": [
                                      {
                                        "name": "ComponentId",
                                        "source": "static",
                                        "value": ""
                                      },
                                      {
                                        "name": "ConfigurationId",
                                        "source": "static",
                                        "value": ""
                                      },
                                      {
                                        "name": "Type",
                                        "source": "static",
                                        "value": "workbook"
                                      },
                                      {
                                        "name": "WorkbookTemplateName",
                                        "source": "static",
                                        "value": "UC-QU-V2-DeviceList"
                                      },
                                      {
                                        "name": "_SelectedTargetVersion",
                                        "source": "column",
                                        "value": "TargetVersion"
                                      },
                                      {
                                        "name": "_SelectedTargetBuild",
                                        "source": "column",
                                        "value": "TargetBuild"
                                      }
                                    ]
                                  }
                                },
                                "numberFormat": {
                                  "unit": 0,
                                  "options": {
                                    "style": "decimal",
                                    "useGrouping": true
                                  }
                                }
                              },
                              {
                                "columnMatch": "UpdateClassification",
                                "formatter": 5
                              },
                              {
                                "columnMatch": "UpdateCategory",
                                "formatter": 5,
                                "formatOptions": {
                                  "customColumnWidthSetting": "150px"
                                }
                              }
                            ],
                            "rowLimit": 1000,
                            "filter": true
                          },
                          "sortBy": [],
                          "graphSettings": {
                            "type": 0,
                            "topContent": {
                              "columnMatch": "TargetVersion",
                              "formatter": 1
                            },
                            "centerContent": {
                              "columnMatch": "Alerts",
                              "formatter": 1,
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            }
                          },
                          "mapSettings": {
                            "locInfo": "LatLong",
                            "sizeSettings": "Alerts",
                            "sizeAggregation": "Sum",
                            "legendMetric": "Alerts",
                            "legendAggregation": "Sum",
                            "itemColorSettings": {
                              "type": "heatmap",
                              "colorAggregation": "Sum",
                              "nodeColorField": "Alerts",
                              "heatmapPalette": "greenRed"
                            }
                          }
                        },
                        "name": "UpdateDeploymentStatus",
                        "styleSettings": {
                          "margin": "-30px 0px 0px 0px"
                        }
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selTab",
                    "comparison": "isEqualTo",
                    "value": "UpdateStatus"
                  },
                  "name": "UpdateDeploymentStatus"
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClientReadinessStatus\r\n| where TimeGenerated == _SnapshotTime\r\n| summarize count() by ReadinessStatus\r\n",
                          "size": 3,
                          "showAnalytics": true,
                          "title": "Windows 11 readiness status",
                          "noDataMessage": "No devices eligible for Windows 11",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "piechart",
                          "chartSettings": {
                            "showMetrics": false,
                            "showLegend": true,
                            "seriesLabelSettings": [
                              {
                                "seriesName": "",
                                "label": "Unknown"
                              }
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 1
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "33",
                        "name": "Windows11ReadinessStatus"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCDeviceAlert \r\n| where TimeGenerated == _SnapshotTime\r\n| where AlertStatus == \"Active\"\r\n| summarize count() by AlertClassification\r\n",
                          "size": 3,
                          "showAnalytics": true,
                          "title": "Device alerts",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "visualization": "piechart",
                          "chartSettings": {
                            "seriesLabelSettings": [
                              {
                                "seriesName": "",
                                "label": "Unknown"
                              },
                              {
                                "seriesName": "Warning",
                                "color": "orange"
                              }
                            ],
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "decimal",
                                  "useGrouping": true,
                                  "maximumFractionDigits": 1
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "33",
                        "name": "Device Alerts"
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "// intialitze constants\r\nlet _SnapshotTime = datetime({_SnapshotTime});\r\n// Prepare the subtables\r\nlet UCClientUpdateStatus_Info = UCClientUpdateStatus | where TimeGenerated == _SnapshotTime;   \r\nlet UCUpdateAlert_Info = UCUpdateAlert | where TimeGenerated == _SnapshotTime | where AlertStatus == \"Active\";   \r\nlet UCDeviceAlert_Info = UCDeviceAlert | where TimeGenerated == _SnapshotTime | where AlertStatus == \"Active\";\r\nlet UCClient_Info = UCClient | where TimeGenerated == _SnapshotTime;\r\n//\r\nlet FeatureUpdateInfo = UCClientUpdateStatus_Info | where UpdateCategory == \"WindowsFeatureUpdate\" and TargetVersion != \"Windows Insider Program\" ;\r\n\r\nlet DeviceFeatureUpdateInfo = (FeatureUpdateInfo\r\n    | join kind=leftouter UCClient_Info on AzureADDeviceId\r\n    | project\r\n        AzureADDeviceId,\r\n        DeviceName,\r\n        UpdateCategory,\r\n        OSVersion,\r\n        OSBuild,\r\n        TargetVersion,\r\n        ClientState,\r\n        ClientSubstate);\r\n\r\nlet UpdateAlerts = (UCUpdateAlert_Info\r\n    | where UpdateCategory == \"WindowsFeatureUpdate\" and TargetVersion != \"Windows Insider Program\" \r\n    | summarize Alerts=count() by AzureADDeviceId);\r\n\r\nlet DeviceAlerts = (UCDeviceAlert_Info\r\n    | summarize Alerts=count() by AzureADDeviceId);\r\n\r\nlet Alerts = (UpdateAlerts\r\n| join kind=fullouter DeviceAlerts on AzureADDeviceId\r\n| extend TotalAlerts = iff(isempty(Alerts), 0, Alerts) + iff(isempty(Alerts1), 0, Alerts1)\r\n| summarize by AzureADDeviceId, TotalAlerts);\r\n\r\nDeviceFeatureUpdateInfo\r\n| join kind = leftouter (Alerts) on AzureADDeviceId\r\n| extend Name =  iff(isempty(DeviceName), \"---\", tostring(DeviceName))\r\n| sort by TotalAlerts desc\r\n| distinct\r\n    Name,\r\n    AzureADDeviceId,\r\n    OSVersion,\r\n    TargetVersion,\r\n    ClientState,\r\n    TotalAlerts,\r\n    UpdateCategory\r\n| project-reorder\r\n    Name,\r\n    AzureADDeviceId,\r\n    OSVersion,\r\n    TargetVersion,\r\n    ClientState,\r\n    TotalAlerts\r\n",
                          "size": 0,
                          "showAnalytics": true,
                          "title": "Device compliance status",
                          "showExportToExcel": true,
                          "queryType": 0,
                          "resourceType": "microsoft.operationalinsights/workspaces",
                          "crossComponentResources": [
                            "{mappedWorkspace}"
                          ],
                          "gridSettings": {
                            "formatters": [
                              {
                                "columnMatch": "Name",
                                "formatter": 1,
                                "formatOptions": {
                                  "linkTarget": "WorkbookTemplate",
                                  "linkIsContextBlade": true,
                                  "workbookContext": {
                                    "componentIdSource": "workbook",
                                    "resourceIdsSource": "workbook",
                                    "templateIdSource": "static",
                                    "templateId": "community-workbooks/UpdateCompliance/Device information",
                                    "typeSource": "workbook",
                                    "gallerySource": "workbook",
                                    "locationSource": "default",
                                    "passSpecificParams": true,
                                    "templateParameters": [
                                      {
                                        "name": "_AzureADDeviceId",
                                        "source": "column",
                                        "value": "AzureADDeviceId"
                                      },
                                      {
                                        "name": "mappedSubscription",
                                        "source": "parameter",
                                        "value": "mappedSubscription"
                                      },
                                      {
                                        "name": "mappedWorkspace",
                                        "source": "parameter",
                                        "value": "mappedWorkspace"
                                      },
                                      {
                                        "name": "_UpdateCategory",
                                        "source": "column",
                                        "value": "UpdateCategory"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "columnMatch": "Alerts",
                                "formatter": 1,
                                "formatOptions": {
                                  "linkTarget": "WorkbookTemplate",
                                  "linkIsContextBlade": true,
                                  "workbookContext": {
                                    "componentIdSource": "workbook",
                                    "resourceIdsSource": "workbook",
                                    "templateIdSource": "static",
                                    "templateId": "community-workbooks/UpdateCompliance/Alerts information",
                                    "typeSource": "workbook",
                                    "gallerySource": "workbook",
                                    "locationSource": "default",
                                    "passSpecificParams": true,
                                    "templateParameters": [
                                      {
                                        "name": "_AzureADDeviceId",
                                        "source": "column",
                                        "value": "AzureADDeviceId"
                                      },
                                      {
                                        "name": "mappedSubscription",
                                        "source": "parameter",
                                        "value": "mappedSubscription"
                                      },
                                      {
                                        "name": "mappedWorkspace",
                                        "source": "parameter",
                                        "value": "mappedWorkspace"
                                      },
                                      {
                                        "name": "_UpdateCategory",
                                        "source": "column",
                                        "value": "UpdateCategory"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "columnMatch": "UpdateCategory",
                                "formatter": 5
                              }
                            ],
                            "rowLimit": 1000,
                            "filter": true
                          }
                        },
                        "name": "DeviceComplianceStatus"
                      }
                    ]
                  },
                  "conditionalVisibility": {
                    "parameterName": "selTab",
                    "comparison": "isEqualTo",
                    "value": "DeviceStatus"
                  },
                  "name": "DeviceStatus"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "selTab",
              "comparison": "isEqualTo",
              "value": "FeatureUpdates"
            },
            "name": "Feature updates"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/Quality updates",
              "items": []
            },
            "conditionalVisibility": {
              "parameterName": "selTab",
              "comparison": "isEqualTo",
              "value": "QualityUpdates"
            },
            "name": "Quality Updates"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/DeliveryOptimization",
              "items": []
            },
            "conditionalVisibility": {
              "parameterName": "selTab",
              "comparison": "isEqualTo",
              "value": "DeliveryOptimization"
            },
            "name": "DeliveryOptimization"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Update"
      },
      "name": "Windws update",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "loadType": "always",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# Windows Update for Business reports\r\n\r\nUse Windows Update for Business reports to check the progress of Windows update deployments and report on devices with compliance issues. This data is updated every 24 hours. *** Last updated: {_TimePicked} ***\r\n\r\n\r\n"
            },
            "name": "WelcomeMessage"
          },
          {
            "type": 1,
            "content": {
              "json": "**Tenant ID**: {mappedTenantId} &nbsp;&nbsp; **Subscription**: {mappedSubscription:name} &nbsp;&nbsp; **Resource group**: {savedMappingResourceGroupName} &nbsp;&nbsp; **Workspace**: {savedMappingWorkspaceName}"
            },
            "customWidth": "60",
            "name": "text - 6"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "paragraph",
              "links": [
                {
                  "id": "6b7dda39-6e2e-4f50-a2ed-b55355839eb0",
                  "linkTarget": "WorkbookTemplate",
                  "linkLabel": "Change the subscription or workspace",
                  "style": "link",
                  "linkIsContextBlade": true,
                  "workbookContext": {
                    "componentIdSource": "workbook",
                    "resourceIdsSource": "workbook",
                    "templateIdSource": "static",
                    "templateId": "community-workbooks/UpdateCompliance/Windows Update for Business reports enrollment",
                    "typeSource": "workbook",
                    "gallerySource": "workbook",
                    "locationSource": "default",
                    "passSpecificParams": true,
                    "templateParameters": [
                      {
                        "name": "SavedMapping",
                        "source": "parameter",
                        "value": "savedMapping"
                      }
                    ]
                  }
                }
              ]
            },
            "customWidth": "35",
            "name": "links - 7"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "b3f4c34c-d421-4373-a567-8e3b10e63235",
                  "cellValue": "currentWorkbook",
                  "linkTarget": "parameter",
                  "linkLabel": "Overview",
                  "subTarget": "Overview",
                  "style": "link"
                },
                {
                  "id": "a55effea-5f5f-45c2-89ea-8032affc3541",
                  "cellValue": "currentWorkbook",
                  "linkTarget": "parameter",
                  "linkLabel": "Quality updates",
                  "subTarget": "QualityUpdates",
                  "style": "link"
                },
                {
                  "id": "748a4c57-143e-4600-81db-1a44fca6aabf",
                  "cellValue": "currentWorkbook",
                  "linkTarget": "parameter",
                  "linkLabel": "Feature updates",
                  "subTarget": "FeatureUpdates",
                  "style": "link"
                },
                {
                  "id": "4683d58f-8d9e-4d83-a456-b8aac636e921",
                  "cellValue": "currentWorkbook",
                  "linkTarget": "parameter",
                  "linkLabel": "Driver Updates",
                  "subTarget": "DriverUpdates",
                  "style": "link"
                },
                {
                  "id": "a58ab8ff-ed50-487d-b661-4d680b693571",
                  "cellValue": "currentWorkbook",
                  "linkTarget": "parameter",
                  "linkLabel": "Delivery Optimization",
                  "subTarget": "DeliveryOptimization",
                  "style": "link"
                }
              ]
            },
            "name": "WorkbookTabControl"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "News and links",
                    "expandable": true,
                    "expanded": true,
                    "items": [
                      {
                        "type": 1,
                        "content": {
                          "json": "** What's new? **\r\n\r\nWindows Update for Business reports is now in general availability. Within the new reports, you can easily monitor your Feature Updates, Quality updates, Driver Updates, and view Delivery Optimization usage data."
                        },
                        "customWidth": "25",
                        "name": "WhatsNew"
                      },
                      {
                        "type": 1,
                        "content": {
                          "json": "** Related links **\r\n\r\nNow generally available: <a href=\"https://techcommunity.microsoft.com/t5/windows-it-pro-blog/now-generally-available-windows-update-for-business-reports/ba-p/3677018\">Windows Update for Business reports </a>\r\n\r\nKeep your Windows client devices up to date with <a href=\"https://docs.microsoft.com/windows/deployment/update/waas-manage-updates-wufb?WT.mc_id=Portal-fx\">Windows Update for Business</a>\r\n\r\nManage Driver Updates with the <a href=\"https://techcommunity.microsoft.com/t5/windows-it-pro-blog/commercial-driver-and-firmware-servicing-is-publicly-available/ba-p/3741194\">Windows Update for Business deployment service</a>\r\n\r\nNew capability! <a href=\"https://techcommunity.microsoft.com/t5/windows-it-pro-blog/windows-update-for-business-reports-access-and-region-control/ba-p/3793118\">Learn about flexible data routing and region control for devices in your environment</a>"
                        },
                        "customWidth": "25",
                        "name": "RelatedLinks"
                      }
                    ]
                  },
                  "name": "GetStartedWithUpdateCompliance"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == SnapshotTime\r\n| extend Title = \"Total enrolled devices\"\r\n| extend Subtitle = \"Total\"\r\n| extend SeeDeviceDistribution = \"View details\"\r\n| summarize TotalDevices=count() by SeeDeviceDistribution, Title, Subtitle\r\n",
                    "size": 3,
                    "title": "Total enrolled devices",
                    "noDataMessage": "No devices",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Title"
                      },
                      "subtitleContent": {
                        "columnMatch": "Subtitle",
                        "formatter": 1
                      },
                      "rightContent": {
                        "columnMatch": "TotalDevices",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 1
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "SeeDeviceDistribution",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/Total enrolled devices",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default"
                          },
                          "bladeOpenContext": {
                            "bladeParameters": []
                          }
                        }
                      },
                      "showBorder": true
                    }
                  },
                  "customWidth": "0",
                  "name": "TotalEnrolledDevices",
                  "styleSettings": {
                    "margin": "10px 10px"
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nlet DeviceAlert = UCDeviceAlert\r\n| where TimeGenerated == _SnapshotTime\r\n| where AlertStatus == \"Active\";\r\nlet UpdateAlert = UCUpdateAlert\r\n| where TimeGenerated == _SnapshotTime\r\n| where AlertStatus == \"Active\";\r\nDeviceAlert\r\n| union (UpdateAlert)\r\n| extend Title = \"Total active alerts\"\r\n| extend Subtitle = \"Devices taking errors\"\r\n| extend ViewDetail = \"View details\"\r\n| summarize ActiveAlerts = count() by Title, ViewDetail,  Subtitle",
                    "size": 3,
                    "title": "Total active alerts",
                    "noDataMessage": "no alerts",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Title"
                      },
                      "subtitleContent": {
                        "columnMatch": "Subtitle",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "ActiveAlerts",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "4",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "ActiveAlerts",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 1
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetail",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/Active alerts",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": true
                    }
                  },
                  "customWidth": "0",
                  "name": "ActiveAlerts",
                  "styleSettings": {
                    "margin": "10px 10px"
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClientReadinessStatus\r\n| where TimeGenerated == _SnapshotTime\r\n| where ReadinessStatus == \"Capable\"\r\n| summarize Total = count(), Title = \"Windows 11 eligibility\", Subtitle = \"Capable\"\r\n| extend ViewDetail = \"View details\"",
                    "size": 3,
                    "title": "Windows 11 eligibility",
                    "noDataMessage": "No devices eligible for Windows 11",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "Title"
                      },
                      "subtitleContent": {
                        "columnMatch": "Subtitle",
                        "formatter": 1
                      },
                      "leftContent": {
                        "columnMatch": "ActiveAlerts",
                        "formatter": 18,
                        "formatOptions": {
                          "thresholdsOptions": "icons",
                          "thresholdsGrid": [
                            {
                              "operator": "Default",
                              "thresholdValue": null,
                              "representation": "success",
                              "text": ""
                            }
                          ]
                        }
                      },
                      "rightContent": {
                        "columnMatch": "Total",
                        "formatter": 1,
                        "numberFormat": {
                          "unit": 17,
                          "options": {
                            "style": "decimal",
                            "maximumFractionDigits": 2
                          }
                        }
                      },
                      "secondaryContent": {
                        "columnMatch": "ViewDetail",
                        "formatter": 7,
                        "formatOptions": {
                          "linkTarget": "WorkbookTemplate",
                          "linkIsContextBlade": true,
                          "workbookContext": {
                            "componentIdSource": "workbook",
                            "resourceIdsSource": "workbook",
                            "templateIdSource": "static",
                            "templateId": "community-workbooks/UpdateCompliance/Windows 11 Readiness Status",
                            "typeSource": "workbook",
                            "gallerySource": "workbook",
                            "locationSource": "default",
                            "passSpecificParams": true,
                            "templateParameters": [
                              {
                                "name": "mappedSubscription",
                                "source": "parameter",
                                "value": "mappedSubscription"
                              },
                              {
                                "name": "mappedWorkspace",
                                "source": "parameter",
                                "value": "mappedWorkspace"
                              }
                            ]
                          }
                        }
                      },
                      "showBorder": true
                    }
                  },
                  "customWidth": "0",
                  "name": "Win11Eligibility",
                  "styleSettings": {
                    "margin": "10px 10px"
                  }
                },
                {
                  "type": 1,
                  "content": {
                    "json": ""
                  },
                  "name": "spacer text"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| summarize SecurityUpdateStatus = count() by OSSecurityUpdateStatus",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "Security update status",
                    "showExportToExcel": true,
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "piechart",
                    "chartSettings": {
                      "yAxis": [
                        "SecurityUpdateStatus"
                      ],
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Latest",
                          "color": "blue"
                        },
                        {
                          "seriesName": "NotLatest",
                          "label": "Not Latest",
                          "color": "orange"
                        },
                        {
                          "seriesName": "MultipleSecurityUpdatesMissing",
                          "label": "Multiple Security Updates Missing",
                          "color": "red"
                        }
                      ]
                    }
                  },
                  "customWidth": "45",
                  "name": "OverallSecurityUpdateStatusChart"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let _SnapshotTime = datetime({_SnapshotTime});\r\nUCClient\r\n| where TimeGenerated == _SnapshotTime\r\n| extend OSFeatureUpdateStatusModified = iff(OSFeatureUpdateStatus == \"Unknown\", \"Windows Insider Program\", OSFeatureUpdateStatus)\r\n| summarize FeatureUpdateStatus = count() by OSFeatureUpdateStatusModified",
                    "size": 3,
                    "showAnalytics": true,
                    "title": "Feature update status",
                    "showExportToExcel": true,
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": [
                      "{mappedWorkspace}"
                    ],
                    "visualization": "piechart",
                    "chartSettings": {
                      "yAxis": [
                        "FeatureUpdateStatus"
                      ],
                      "seriesLabelSettings": [
                        {
                          "seriesName": "Latest",
                          "color": "blue"
                        },
                        {
                          "seriesName": "NotLatest",
                          "label": "Not Latest",
                          "color": "orange"
                        },
                        {
                          "seriesName": "MultipleSecurityUpdatesMissing",
                          "label": "Multiple Security Updates Missing",
                          "color": "red"
                        }
                      ]
                    }
                  },
                  "customWidth": "45",
                  "name": "OverallFeatureUpdateStatusChart"
                }
              ],
              "exportParameters": true
            },
            "conditionalVisibility": {
              "parameterName": "currentWorkbook",
              "comparison": "isEqualTo",
              "value": "Overview"
            },
            "name": "SummaryContentGroup",
            "styleSettings": {
              "margin": "0",
              "padding": "0"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/Quality updates",
              "items": [],
              "exportParameters": true
            },
            "conditionalVisibility": {
              "parameterName": "currentWorkbook",
              "comparison": "isEqualTo",
              "value": "QualityUpdates"
            },
            "name": "QualityUpdatesContentGroup"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/Feature updates",
              "items": [],
              "exportParameters": true
            },
            "conditionalVisibility": {
              "parameterName": "currentWorkbook",
              "comparison": "isEqualTo",
              "value": "FeatureUpdates"
            },
            "name": "FeatureUpdatesContentGroup"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/DeliveryOptimization",
              "items": [],
              "exportParameters": true
            },
            "conditionalVisibility": {
              "parameterName": "currentWorkbook",
              "comparison": "isEqualTo",
              "value": "DeliveryOptimization"
            },
            "name": "group - 5"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "template",
              "loadFromTemplateId": "community-workbooks/UpdateCompliance/Driver updates",
              "items": []
            },
            "conditionalVisibility": {
              "parameterName": "currentWorkbook",
              "comparison": "isEqualTo",
              "value": "DriverUpdates"
            },
            "name": "DriverUpdatesContentGroup"
          }
        ],
        "exportParameters": true
      },
      "conditionalVisibilities": [
        {
          "parameterName": "mappedSubscription",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "mappedWorkspace",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "isOnboarded",
          "comparison": "isEqualTo",
          "value": "true"
        }
      ],
      "name": "HubGroup"
    }
  ],
  "fallbackResourceIds": [
    "/subscriptions/a8e9fa59-deeb-4837-b5d4-5d838382294a/resourceGroups/CSUB_LOG_ANALYTIC/providers/Microsoft.OperationalInsights/workspaces/CSUB-LOG-ANALYTIC"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
